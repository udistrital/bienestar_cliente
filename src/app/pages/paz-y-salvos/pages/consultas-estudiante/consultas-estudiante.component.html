<div class="container-fluid bg-white mh-100 mw-100">
  <div class="d-flex p-2 flex-row">
    <div class="col-xs-12 col-md-6 col-lg-6">
      <h1>Paz y Salvos</h1>
      <br />
    </div>
    <div class="col-xs-12 col-md-6 col-lg-6 align-items-end">
      <div class="row">
        <div class="col-md-6">
          <p>
            Numero total de Registros:
            <span
              ><em>{{ solicitudesExt.length }}</em></span
            >
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 align-items-end">
      <nb-card>
        <nb-card-header>
          <div class="text-center pt-2">
            <div class="menu-header">
              <h1>
                Listado de solicitudes de Paz y Salvos
              </h1>
            </div>
            <small>
              El paz y salvo solo se podra descargar una vez ha finalizado el proceso 
            </small>
          </div>
        </nb-card-header>
        <hr />

        <nb-card-body class="fijo" *ngIf="solicitudesExt.length > 0">
          <div class="text-center table-pag">
            <mat-form-field class="page justify-content-center text-center">
              <mat-label class="text-center">Tama√±o de Tabla</mat-label>
              <select matNativeControl [(ngModel)]="paginacion">
                <option
                  *ngFor="let option of itemsPag | slice : 0 : 6"
                  [value]="option"
                  [selected]="paginacion === option"
                >
                  {{ option }}
                </option>
              </select>
            </mat-form-field>
          </div>
          <table class="table">
            <thead class="bg-ud-table">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Tipo solicitud</th>
                <th scope="col">Estado</th>
                <th scope="col">Fecha radicacion</th>
                <th scope="col">proceso</th>
                <th scope="col">Opciones</th>
              </tr>
            </thead>
            <tbody class="bg-ud-table-cell">
              <tr
                *ngFor="
                  let item of solicitudesExt
                    | paginate
                      : { itemsPerPage: paginacion, currentPage: pagActual };
                  let i = index
                "
              >
                <th scope="row">{{ i + 1 + (pagActual - 1) * paginacion }}</th>
                <td>{{ item.EstadoTipoSolicitudId.TipoSolicitud.Nombre }}</td>
                <td>{{ item.EstadoTipoSolicitudId.EstadoId.Nombre }}</td>
                <td>{{ item.FechaRadicacion | fechaFormat }}</td>
                <td>
                  <span
                    *ngIf="item.SolicitudFinalizada"
                    class="badge rounded-pill bg-danger"
                    >Finalizada</span
                  >
                  <span
                    *ngIf="!item.SolicitudFinalizada"
                    class="badge rounded-pill bg-success"
                    >Activa</span
                  >
                </td>
                <td>
                  <a
                    [href]="
                      item.documento
                        ? (item.documento | safe : 'resourceUrl')
                        : 'javascript:void(0)'
                    "
                    target="_blank"
                    [attr.disabled]="!item.documento ? true : null"
                    [ngClass]="{ 'disabled-link': !item.documento }"
                  >
                    Descarga Paz y Salvo
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="center-block">
            <pagination-controls
              class="pag"
              responsive="true"
              autoHide="true"
              previousLabel="Anterior"
              nextLabel="Siguiente"
              (pageChange)="pagActual = $event"
            >
            </pagination-controls>
          </div>
        </nb-card-body>
      </nb-card>
    </div>
  </div>

  <hr />
</div>
